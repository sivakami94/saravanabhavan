

<div class="container pt-5 mx-auto">
  <% if(orders.length) { %>
  
      <h1>All Orders</h1>
<table class="table ">
    <thead class="thead">
      <tr>
        <th scope="col">Customer Id</th>
        <th scope="col">Items</th>
        <th scope="col">Phone Number</th>
        <th scope="col">Address</th>
        <th scope="col">Time</th>
      </tr>
    </thead>
    <tbody>
   <%   function render(items) { %>
    <%   let parsedItems = Object.values(items) %>
    <%   parsedItems.forEach(function(menuItem) { %>
           <% if(menuItem.qty){ %>
                <p><b><%= menuItem.item.name %></b> - <%= menuItem.qty %> pcs </p>

            <% } %>
      <%  }) %>
   <%   } %>
     
     
            <% orders.forEach((order)=> { %>
              <tr>
                 <td>
                      <a href="/menu"><%= order._id %></a>
                </td>
                <td>
                  <%= render(order.items) %>
            </td>
                 <td>
                      <%= order.phone %>
                </td>
                <td>
                     <p> <%= order.door %></p>
                     <p> <%= order.line1 %></p>
                     <p> <%= order.line2 %></p>
                     <p> <%= order.landmark %></p>
                     <p> <%= order.location %></p>

               </td>
                <td>
                      <%=moment(order.createdAt).format("hh:mm A") %>
               </td>
             </tr>
            <%  }) %>
             <% } else{ %>
              <%  console.log(orders) %>
                    <h1 class="text-center p-5">No Orders Found </h1>   
             <% } %>
    
    </tbody>
  </table>
</div>
